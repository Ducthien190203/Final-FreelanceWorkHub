<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post a New Job</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/static/css/style.css}">
</head>
<body class="d-flex flex-column min-vh-100 bg-light">

    <header th:replace="~{header :: main-header}"></header>

    <main class="container my-5 flex-grow-1">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card p-4 p-md-5">
                    <div class="card-body">
                        <h2 class="card-title mb-4 text-center">Post a New Job</h2>
                        <form th:action="@{/jobs/create}" method="post" th:object="${job}">
                            <!-- Job Title -->
                            <div class="mb-3">
                                <label for="title" class="form-label fw-bold">Job Title</label>
                                <input type="text" id="title" class="form-control" th:field="*{title}" required>
                            </div>
                            <!-- Category -->
                            <div class="mb-3">
                                <label for="category" class="form-label fw-bold">Category</label>
                                <select id="category" class="form-select" th:field="*{category}" required>
                                    <option value="">Select a category</option>
                                    <option value="Web & Software Development">Web & Software Development</option>
                                    <option value="Design & Creative">Design & Creative</option>
                                    <option value="Writing & Content">Writing & Content</option>
                                    <option value="Digital Marketing">Digital Marketing</option>
                                    <option value="Business Support">Business Support</option>
                                    <option value="Data & Analytics">Data & Analytics</option>
                                </select>
                            </div>
                            <!-- Skills -->
                            <div class="mb-4">
                                <label for="skills" class="form-label fw-bold">Skills Required</label>
                                <input type="text" id="skills" class="form-control" th:field="*{skills}" placeholder="e.g., Java, Spring, JavaScript" required>
                                <div class="form-text">Enter skills separated by a comma.</div>
                            </div>

                            <hr class="my-4">

                            <!-- Job Description -->
                            <div class="mb-3">
                                <label for="description" class="form-label fw-bold">Job Description</label>
                                <textarea id="description" class="form-control" th:field="*{description}" rows="5" placeholder="Provide a general overview of the project."></textarea>
                            </div>
                            <!-- Responsibilities -->
                            <div class="mb-3">
                                <label for="responsibilities" class="form-label fw-bold">Responsibilities</label>
                                <textarea id="responsibilities" class="form-control" th:field="*{responsibilities}" rows="5" placeholder="List the key responsibilities for this role."></textarea>
                            </div>
                            <!-- Requirements -->
                            <div class="mb-4">
                                <label for="requirements" class="form-label fw-bold">Requirements</label>
                                <textarea id="requirements" class="form-control" th:field="*{requirements}" rows="5" placeholder="List the necessary skills and qualifications."></textarea>
                            </div>

                            <hr class="my-4">

                            <!-- Experience Level -->
                            <div class="mb-3">
                                <label for="experienceLevel" class="form-label fw-bold">Experience Level</label>
                                <select id="experienceLevel" class="form-select" th:field="*{experienceLevel}" required>
                                    <option value="Entry-Level">Entry-Level</option>
                                    <option value="Intermediate">Intermediate</option>
                                    <option value="Expert">Expert</option>
                                </select>
                            </div>
                            <!-- Location -->
                            <div class="mb-4">
                                <label class="form-label fw-bold">Location Type</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{locationType}" id="remote" value="Remote" required>
                                    <label class="form-check-label" for="remote">Remote</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{locationType}" id="on-site" value="On-site">
                                    <label class="form-check-label" for="on-site">On-site</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{locationType}" id="hybrid" value="Hybrid">
                                    <label class="form-check-label" for="hybrid">Hybrid</label>
                                </div>
                                <!-- Ô nhập địa chỉ, chỉ hiện khi chọn On-site/Hybrid -->
                                <div id="locationAddressGroup" class="mt-2" style="display: none;">
                                    <label for="locationAddress" class="form-label">On-site Address</label>
                                    <input type="text" id="locationAddress" class="form-control" th:field="*{locationAddress}" placeholder="City, State/Province">
                                </div>
                            </div>

                            <!-- Payment -->
                            <div class="mb-3">
                                <label class="form-label fw-bold">Payment Type</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{paymentType}" id="hourly" value="Hourly" required>
                                    <label class="form-check-label" for="hourly">Hourly Rate</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{paymentType}" id="fixed" value="Fixed">
                                    <label class="form-check-label" for="fixed">Fixed Price</label>
                                </div>
                            </div>
                             <!-- Các ô nhập ngân sách, hiển thị có điều kiện -->
                            <div id="hourlyRateGroup" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="minRate" class="form-label">Min Rate ($/hr)</label>
                                        <input type="number" step="0.01" id="minRate" class="form-control" th:field="*{minRate}">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="maxRate" class="form-label">Max Rate ($/hr)</label>
                                        <input type="number" step="0.01" id="maxRate" class="form-control" th:field="*{maxRate}">
                                    </div>
                                </div>
                            </div>
                            <div id="fixedPriceGroup" class="mb-3" style="display: none;">
                                <label for="budget" class="form-label">Project Budget ($)</label>
                                <input type="number" step="0.01" id="budget" class="form-control" th:field="*{budget}">
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg mt-3 w-100">Post This Job</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer th:replace="~{footer :: main-footer}"></footer>

    <!-- JavaScript để xử lý hiển thị có điều kiện -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const locationTypeRadios = document.querySelectorAll('input[name="locationType"]');
            const locationAddressGroup = document.getElementById('locationAddressGroup');

            const paymentTypeRadios = document.querySelectorAll('input[name="paymentType"]');
            const hourlyRateGroup = document.getElementById('hourlyRateGroup');
            const fixedPriceGroup = document.getElementById('fixedPriceGroup');

            function toggleLocationAddress() {
                const selected = document.querySelector('input[name="locationType"]:checked');
                if (selected && (selected.value === 'On-site' || selected.value === 'Hybrid')) {
                    locationAddressGroup.style.display = 'block';
                } else {
                    locationAddressGroup.style.display = 'none';
                }
            }

            function togglePaymentFields() {
                const selected = document.querySelector('input[name="paymentType"]:checked');
                if (selected) {
                    if (selected.value === 'Hourly') {
                        hourlyRateGroup.style.display = 'block';
                        fixedPriceGroup.style.display = 'none';
                    } else if (selected.value === 'Fixed') {
                        hourlyRateGroup.style.display = 'none';
                        fixedPriceGroup.style.display = 'block';
                    }
                } else {
                    hourlyRateGroup.style.display = 'none';
                    fixedPriceGroup.style.display = 'none';
                }
            }

            locationTypeRadios.forEach(radio => radio.addEventListener('change', toggleLocationAddress));
            paymentTypeRadios.forEach(radio => radio.addEventListener('change', togglePaymentFields));

            // Initial check on page load
            toggleLocationAddress();
            togglePaymentFields();
        });
    </script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>